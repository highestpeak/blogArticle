日志的管理和重演是数据库实现中最复杂的部分之一。如果涉及到并行处理和分布式系统（日志的复制和重演是数据库高可用性的基础），会比上述场景还要复杂得多。

锁也是数据库实现中最复杂的部分之一。同样，如果涉及到分布式系统（分布式锁和两阶段提交是分布式事务的基础），会比上述场景还要复杂得多。

---

B+树文件组织：

我们不仅把B+树结构作为索引使用，而且把它作为一文件中的记录的组织者：B+树文件组织。

B+树文件组织可以用于存储大型数据对象，如 SQL clob类型以及blob类型，这些数据对象可能比磁盘块还大，甚至达到好几个GB。这么大的数据对象可以通过拆分成稍小的记录序列并组织成B+树文件组织进行存储。拆分的记录可以按序编号，或者根据记录在大型对象中的字节偏移量进行编号这样记录的编号就可以用作搜索码

也有B树文件组织，两种方法的主要区别在于B树去除了搜索码值存储中的冗余



- 为什么说B+比B树更适合实际应用中操作系统的文件索引和数据库索引？

  1、B+的磁盘读写代价更低。

  B+的内部结点并没有指向关键字具体信息的指针，因此其内部结点相对B树更小。

  如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说IO读写次数也就降低了。

  2、B+-tree的查询效率更加稳定。

  由于非终结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当

- 

---



<u>*todo:自底向上B+树构建*</u>

- 什么是临时表，临时表什么时候删除?
- 有哪些锁（乐观锁悲观锁），select 时怎么加排它锁？
- 非关系型数据库和关系型数据库区别，优势比较？关系型数据库概念及主要特点？关系型数据库的典型产品、特点及应用场景？
- 数据库的读写分离、主从复制，主从复制分析的 7 个问题？MySQL的复制原理以及流程？详述 MySQL 主从复制原理及配置主从的完整步骤。MySQL 如何实现双向互为主从复制，并说明应用场景？MySQL 如何实现级联同步，并说明应用场景？MySQL 主从复制故障如何解决？
- MySQL都有什么锁，死锁判定原理和具体场景，死锁怎么解决？
- MySQL 高并发环境解决方案？
- MySQL binlog的几种日志录入格式以及区别
- MySQL数据库cpu飙升到500%的话他怎么处理？
- 什么是 MySQL 多实例，如何配置 MySQL 多实例？
- 如何加强 MySQL 安全，请给出可行的具体措施？
- 行级锁定的优点，缺点：







十、什么是表分区？
表分区，是指根据一定规则，将数据库中的一张表分解成多个更小的，容易管理的部分。从逻辑上看，只有一张表，但是底层却是由多个物理分区组成。

十一、表分区与分表的区别
分表：指的是通过一定规则，将一张表分解成多张不同的表。比如将用户订单记录根据时间成多个表。

分表与分区的区别在于：分区从逻辑上来讲只有一张表，而分表则是将一张表分解成多张表。

十二、表分区有什么好处？
1、存储更多数据。分区表的数据可以分布在不同的物理设备上，从而高效地利用多个硬件设备。和单个磁盘或者文件系统相比，可以存储更多数据

2、优化查询。在where语句中包含分区条件时，可以只扫描一个或多个分区表来提高查询效率；涉及sum和count语句时，也可以在多个分区上并行处理，最后汇总结果。

3、分区表更容易维护。例如：想批量删除大量数据可以清除整个分区。

4、避免某些特殊的瓶颈，例如InnoDB的单个索引的互斥访问，ext3问价你系统的inode锁竞争等。

十三、分区表的限制因素
1、一个表最多只能有1024个分区

2、MySQL5.1中，分区表达式必须是整数，或者返回整数的表达式。在MySQL5.5中提供了非整数表达式分区的支持。

3、如果分区字段中有主键或者唯一索引的列，那么多有主键列和唯一索引列都必须包含进来。即：分区字段要么不包含主键或者索引列，要么包含全部主键和索引列。

4、分区表中无法使用外键约束

5、MySQL的分区适用于一个表的所有数据和索引，不能只对表数据分区而不对索引分区，也不能只对索引分区而不对表分区，也不能只对表的一部分数据分区。

十四、如何判断当前MySQL是否支持分区？
命令：show variables like '%partition%' 运行结果:

mysql> show variables like '%partition%';
+-------------------+-------+| Variable_name | Value |+-------------------+-------+| have_partitioning | YES |+-------------------+-------+1 row in set (0.00 sec)
have_partintioning 的值为YES，表示支持分区。

十五、MySQL支持的分区类型有哪些？
RANGE分区：这种模式允许将数据划分不同范围。例如可以将一个表通过年份划分成若干个分区

LIST分区：这种模式允许系统通过预定义的列表的值来对数据进行分割。按照List中的值分区，与RANGE的区别是，range分区的区间范围值是连续的。

HASH分区 ：这中模式允许通过对表的一个或多个列的Hash Key进行计算，最后通过这个Hash码不同数值对应的数据区域进行分区。例如可以建立一个对表主键进行分区的表。

KEY分区 ：上面Hash模式的一种延伸，这里的Hash Key是MySQL系统产生的。