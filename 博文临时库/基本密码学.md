怎么保证输入的账号密码的安全性

网站（尤其是银行网站）在其他方面还做了很多充足的工作（包括制定很多安全方案）：

1. 提示用户在登录银行网站的计算机上安装各类安全软件，并向用户介绍一些安全上网的知识；
2. 为了保障用户在登录网站时，密码不被盗取，密码框做成了单独的插件，能够在一定程度上防止密码丢失；
3. 为了保障用户提交的数据不被各种网络监听捕获，采取了https的安全超文本传输协议；
4. 为了防止别人无限制的试探破解用户的密码，设定连续输错n次密码，就会锁定账号；
5. 为了进一步保障账号内资金的安全，采取了查询密码与提款密码的双密码形式；
6. 为了让用户能够立即了解自己银行账号安全状态，如果用户绑定了手机，每次账号信息变更，就会给用户发短信通知；
7. 为了进一步增强密码的安全性，引入了OTP动态密码产品，给用户提供了动态密码产品，以供对账号有安全需求的用户使用。



首先一点就是一定要在客户端进行密码加密，这可以使得后端拿到的密码已经是加过密的，一来服务器接触不到原始密码，二来就算通信被监听，第三方就算拿到了可以用来登陆的客户端加密密文，也无法获知用户的原始密码。

可以使用下面的方式来在客户端加密原始密码：

```
sha256(
  sha265(sha265(password)) + sha265(username)
  )
```

这样，不仅可以增加密文反推原文的难度，还加入用户名，使得就算密码相同，不同用户的密文也完全不一样。但注意：客户端的加密算法是公开的。



密码存储应该把密码和随机的salt揉在一起经过hash，然后把salt和计算出来的hash tag一起存到数据库里。验证密码的时候就重新用salt计算一遍hash tag然后进行比较。

- 盐的保存非常关键，务必将它与用户信息分开存放。

由于对同一字符串进行哈希的结果是恒定的，所以知道了算法和密文，理论上是可以反推出密码的，反推的难度取决于用户原始密码的复杂度。那如何才能够让反推的难度指数级增大呢？答案是在原始密码密文的基础之上，再加入一个随机字符串，从而达到让用户的密码更复杂的效果。这个随机字符串，便是盐。

后端获取到客户端传来的密码之后，再通过加盐哈希进行再加密。比如像下面这样：

```
sha256(
  sha256(username + sha256(password + salt)) + salt + sha256(username + salt)
  )
```

hash保证单向性，随机的salt又保证了不能利用预先计算好的rainbow table来暴力逆向

在hash + salt的情况下，就算密码hash tag的数据库泄露了也没关系，没人能在短时间内逆向出原本的密码。



hash算法的选取也很重要，常见的有md5、sha1、sha2、sha256、sha512、sha3

<u>*todo：每种hash算法的原理什么的*</u>



们还可以更安全。那就是经常变更盐，让用户信息表中的密文字段值也经常变化。这样，除非同时拿到用户信息和盐，否则依然无效。



注意，用户名只能哈希，不能加盐，否则就没什么依据去找盐了。



通信的安全
在应用层面基本上已经很安全了。接下来就是客户端和通信的安全。客户端的环境基本不可控，所以只能在通信的安全上想办法了。不过其实也不用想什么多的办法，直接使用 HTTPS 就行了。

https://juejin.im/entry/6844903440615735310



