# 原则

1. 每天任务，逐项完成
2. 遇到问题，清单记录
3. 每行代码，想改可改
4. 无从下手就拆解任务
5. 学习设计方案，为什么用这个不用那个，why rpc not http
6. 能跑个demo的就运行个demo
7. 从每个业务/用例入手，看整个调用链和执行链，必要时画图辅助，产品的整个结构，这样才能写需求的时候知道在干什么
8. 查看 git 历史记录
9. <u>***一些内部文档，是不能传到博客上什么的，那么就需要一个本地的服务器进行同步和个人查看***</u>

# 注意

- 备份之前的 settings.xml 文件，好习惯要养成
- 禁止在服务器等公共位置设置ssh协议访问，会导致任何登陆用户使用你的账号访问代码。
- 公钥 ~/.ssh/id_rsa.pub https://git.corp.kuaishou.com/-/profile/keys

# 非项目相关

> 待学-基础技能（用到的、谈到的）

- mac 快捷键
  
  - https://it.corp.kuaishou.com/webdoc/view/Pub4028c80c651e50df01652310a9370124.html
  
- mac 终端

  .bash_profile 、.zshrc、.bashrc 等的区别

  bash的配置文件是.bashrc, zsh的配置文件是.zshrc，当你使用zsh作为默认shell工具的时候，它启动时并不会加载bash的这两个配置文件.bashrc和.bash_profile，而只会
  加载自己的配置文件.zshrc

  https://blog.csdn.net/tao_627/article/details/104856365

- 软连接

- brew

- linux 命令！

- mac 字符输入

- Xcode 工具链、gitlab、homebrew、git、rbtools、reviewboard、多版本jdk、maven、kess-agent、idea、idea check-style、[**KsBoot ？？**](https://docs.corp.kuaishou.com/k/home/Vc_udxpfv8jY/fcADyDauHHStOVZ2gFkyyR61b)、

- https://www.earthdatascience.org/courses/intro-to-earth-data-science/open-reproducible-science/jupyter-python/jupyter-notebook-shortcuts/

- 有的时候 excel 做数据分析真的很好用，因为你会经常下载csv的数据，用py还得写代码

- git常见操作的命令和gui操作

- docker and k8s 

  - https://zhuanlan.zhihu.com/p/53260098
  
- 正则表达式！！！！

- grep 选项 主要是处理日志文件？？？

- 各种context的写法（包括android等，都是threadlocal？）

- curl

- guava 的 StringUtils 等等一系列 utils

- 

# 项目相关的

- 模块命名规则？各模块名字？和业务的对应
- 到处引用的 util 、类、方法
- maven 父子项目、打包依赖等， 多模块等
- websocket
- vm option、idea project run config配置
- swagger
- 打日志的规范
- task和listener单独部署这种
- ab分组计算

## 中间件

- [框架能力](https://docs.corp.kuaishou.com/k/home/VdnXYp3KG_H4/fcAC9uZPBNsiRCzLwbwG8W-2q)

- KBus 

  - https://halo.corp.kuaishou.com/kbus/#/application 
  - https://wiki.corp.kuaishou.com/pages/viewpage.action?pageId=468127634

  binlog

  - 在内部系统干什么用？
  - 其他地方的使用
  - 数据变更的 log
  - 用于备份数据？
  - 消息中间件订阅数据库变更事件

- ksboot

- Kafka

  - https://wiki.corp.kuaishou.com/pages/viewpage.action?pageId=51521249
  - Topic 等的的概念、分布式的应用
  - https://www.jianshu.com/p/1bccdbe87cff
  - https://zh.wikipedia.org/wiki/Kafka

- AP accessProxy

- 基础架构 的 wiki 和 docs

- Maxwell是一个能实时读取MySQL二进制日志binlog，并生成 JSON 格式的消息，作为生产者发送给 Kafka，Kinesis、RabbitMQ、Redis、Google Cloud Pub/Sub、文件或其它平台的应用程序。

- [Es 倒排索引](https://www.cnblogs.com/cjsblog/p/10327673.html)

- Clickhouse

- Redis 读取数据等!! 实验！！

- kconf 源码？

## 类库

- httpClient core 等等
- computeIfAbsent
- protobuf 
  - 为什么用这个
  - 和json等的区别
  - 坑点
  - 
- Guava 学习、guava util、jdk自带util（trim等）（具体的处理情况） ComparisonChain 
  - guava 的 Cache
- [logback](https://www.cnblogs.com/xrq730/p/8628945.html)
- 类似上述，查看其他 service 、 task、rpc 等等的用例处理，明白业务和技术点
- 线程池（siginal、wait等）
- StopWatch
- LocalDateTime

## 其他问题

- enum 构造器执行时机
- https://blog.csdn.net/qq_40081976/article/details/79312545
- https://vim.fandom.com/wiki/Count_number_of_matches_of_a_pattern
- https://regex101.com/r/vM7wT6/2 的使用
- 主/从库
- 倒排索引，非简单的概念，从数据库，es等来看
- https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map
- https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map
- https://stackoverflow.com/questions/5847939/is-list-iterator-thread-safe
- [git cherry-pick](http://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html)
- git https://juejin.cn/post/6844903600976576519
- 日志：可以格式化 exception 的一个py脚本？(对一个log文件进行命令输出txt输出并格式化)
- 一系列的小工具：unix时间戳（日志）（在线工具箱）
- 如何看日志
- 多线程异常，多线程错误异常等查看
- shell 文本处理 grep、sed、awk
  -  grep -A 10 -B 10 ‘123’ test.log //打印匹配行的前后10行
  -  http://www.ruanyifeng.com/blog/2018/11/awk.html

# 业务

```
DocsGroupSyncJob 同步群组成员到老系统
EncryptNotificationRunOnceTask 加密通知
KimGroupSyncJob 定时同步kim群组至docs群组
KnowledgeBaseCreateJob 检查创建个人知识库
KUimFailedKafkaEventRetryTask 中台同步定时任务
UserInfoSyncJob 主数据人员同步定时任务
```

- 文档数据结构（run、spacers）
- 一些多线程处理等
- 灰度？
- 集群双写
- https://kstack.corp.kuaishou.com/tech/web/article/info/577 文档协同
  - ot算法
  - 冲突和合并，和git的冲突和合并 对比看一下
  - 版本窗口滑动
  - [<u>*todo: docs系列原理的文档*</u>](https://kstack.corp.kuaishou.com/tech/web/personal/wangyongfeng)
- 

# 写法

- kconf的build 中清理上一个client
- finally中清理context上下文的信息
- 在一个顺序过程中用 excutor future 等构建出了异步请求. SearchsApiServiceImpl::searchByResort
- parallelStream 处理稍微轻量的任务，但是数量比较大的？
- 分页写法
- dbTaskHelper
- treemap ceilingEntry
- drawio 的编辑处理和版本控制可以直接对整个文件进行管理，不用具体到每一个图形组件
- 

# 周边

## hive

- PARTITIONED BY 分区
- store as 存储格式
- 窗口函数 https://zhuanlan.zhihu.com/p/92654574
  - 取前几个/后几个值 LAG（统计窗口内往上第n个值）、LEAD、FIRST_VALUE和LAST_VALUE
- lateral view explode 行展开
- grouping set
- MR map reduce原理和过程
- https://www.cnblogs.com/sunpengblog/p/11322170.html
- hive 的建表插入语句是按照顺序插入的，每次必须插入全字段，并且按顺序
  - 不是和mysql一样是有别名的
  - 存储结构不一样，hive是单纯按行存储，然后按分割符取出字段
- https://www.cnblogs.com/cc11001100/p/9043946.html collect list
- https://blog.csdn.net/sl1992/article/details/53894481 array contains
- 写sql，写sql，写sql 
- Sql group by 选取多列
- hsql执行引擎 非数据库
- 



数据导入：青藤kakfka-[-数据同步平台](https://data-exchange.corp.kuaishou.com/index.html#/creation)---job--选topic/时间戳字段

建表

hivetomysql：集成开发平台---》 数据同步

kuaiBI---mysql

申请开发组



十分钟入门数据开发平台



搜索算法：http://c.biancheng.net/view/6917.html



- 阅读代码：

  git的shelve来暂时保存当前修改，然后切换到注释分支，去写下自己的注释（可以让注释分支/源码阅读分支不能提交到远端 hooks写一个pre-commit应该可以防止提交）

  然后切换回来，shelve恢复原来的修改到暂存区，然后继续在这个分支工作
  
  shelve真的好用
  
  squash等也很好用




https://www.jianshu.com/p/91fa3d2ac892



map keyset能否修改，是否影响原来的map的key，这是一种view，guava中的setview，

git push origin HEAD:refs/for/master



diff 需要的注意力是不一样的，优先级比如

\1. bug fix
\2. feature 逻辑改动
\3. 手工重构整理代码
\4. 自动重构
\5. 顺手改个拼写
\6. 全局 format 等等

其中 12 应该是最需要 review 的，而我们现在 review 系统是基于文本的，所有 diff 都是平等的。

reviewer 也是人，注意力也是有限的，而且大家时间都很宝贵。你应该尽量把你的核心改动，用最容易读懂的方式告诉 reviewer。

如果你每次提交 12 的时候，还顺便带一堆的 3456，不光会让 review 很累，而且很容易放过 bug。所以你尽量把 3456 挑出去，单独一个 patch review 或者直接 push 了。



spring 配置文件 @value   @ConfigurationProperties(prefix = "docs.merlot.doc-based")



kconf 更新配置的时候涉及到一个线程安全的问题，如果是每次都去set值的话，那需要对每一个field都去voliate，代价大，所以只对整个对象voliate，构建好新的对象之后，再去直接voliate设置新的对象

guava memory Supplier 



guava 笛卡尔积



判空

判空，修改之后重新过一遍代码



postconstruct

https://www.jianshu.com/p/98cf7d8b9ec3

https://stackoverflow.com/questions/44681142/postconstruct-annotation-and-spring-lifecycle



判断远程文件有无变化，用Last-Modify、etag等字段

scheduleWithFixedDelay和scheduleAtFixedRate



各种处理http发送和请求的注意场景和问题



字符串拼接各种情形，直接 stringBuilder delete 和 insert 是使用了 arraycopy，不如取前缀，取后缀，然后 前+curr+后



es explain 解释es查询：如何匹配、如何评分、为什么一个文档没有被匹配到

- 指定id解释特定文档 /index/type/id/_explain



Maven 的配置：

- [私服nexus仓库地址，在pom中配置好地址即可deploy到仓库](https://dunwu.github.io/java-tutorial/javatool/build/maven/maven-deploy.html#%E5%90%AF%E5%8A%A8%E5%81%9C%E6%AD%A2-nexus)

- maven reload project 更新jar包
- maven的使用问题。。。太严重了
- 发布到私服， groupId aircraftId等等的一系列问题
- 各种mvn参数，mvn构建命令
- 部署个人私服，私服jar包的同步服务，代码自动拉取更新



尽管一个 @Service 即 @component 没有使用过，但是他被spring使用了，被自动初始化 了，因此也可能出现某些错误 ，比如在这些类中初始化过程修改了某些值

java.lang.NoClassDefFoundError: org/apache/lucene/search/spans/SpanBoostQuery

尽管没有任何引入，但是仍然未找到类可能是因为引入了多个版本，导致冲突，进而找不到

- no class deffound 的常见原因



es查的好快！那么多东西怎么做到只花了几毫秒和十几毫秒的？？？？？

- 好像比mysql还快，好家伙，要学习一下！
- es查询有缓存！！



输入纠错

https://www.jianshu.com/p/914f102bc174



lvm接口返回vodka相似的数据，对各个所有接口的认识

[Sodas  ](https://www.jianshu.com/p/914f102bc174) 



Sonarlint 在自己的idea上装上



idea 各种配置熟练、快捷键

如果使用 postConstruct 那么可能出现没有引用这个类（bean），但是仍然执行了被postConstruct注解的方法的情况。

例如我在 postConstruct 注解的方法 init 中执行 网络请求，本意为在被注入的地方开始请求，但是如果没有其他类引用这个类，则网络请求也会被启动，资源浪费





sh脚本



java并发中的使用而不是原理

lock condition

一些并发组件：

1. 延时请求执行，重复key写入丢弃，保证key按照固定时延

   BlockingDelayBufferTrigger



环境变量做控制符，ikService，System.setProperty

spring获取应用的配置文件 environment.getActiveProfiles()



用到的jar依赖库

```
国际化组件
com.ibm.icu
html解析器
jsoup
spring-cloud
swagger
不同类型的文件提取数据
org.apache.tika
jackson

```

不会使用很多依赖库的，很多依赖库也是只有几个文件在用，无关紧要

junit

https://github.com/mockito/mockito



解析所有的pom，找到引用了哪些包？

https://stackoverflow.com/questions/24631909/differences-between-java-8-date-time-api-java-time-and-joda-time



ImageMagick   org.im4java JMagick 

zuul





搜索的一些相关问题

https://zhuanlan.zhihu.com/p/65874915

https://www.jianshu.com/p/9d729c9c94c4



Lombok builder tobuilder

```
getClass().getClassLoader().getResourceAsStream
```

```
<build>
   <resources>
      <resource>
         <directory>src/main/java/org/wltea/analyzer/dic</directory>
         <targetPath>org/wltea/analyzer/dic</targetPath>
         <filtering>true</filtering>
         <includes>
            <include>*.dic</include>
            <include>*.xml</include>
         </includes>
      </resource>
   </resources>
</build>
```

maven 编译要加上 include 的编译文件类型。如果getClass().getClassLoader().getResourceAsStream老是是null，不是去看代码目录下有没有这个文件，要去看一下编译完成后的target的目录下去看有没有目标文件

maven的build的resource目录，配置很好用，注意可以配置一下看下编译后

http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html





lambda

https://github.com/PhantomThief/more-lambdas-java

https://zhuanlan.zhihu.com/p/112719984

https://tech.meituan.com/2020/08/20/mt-bert-in-document.html



长尾分布



log4j   Lombok log.info等



es中文文档（搜索的很多问题）



spring的配置中心（类似kconf的）



个人gist：！！

DbTaskHelper 批量执行任务（例如查出1k条后批量执行一个任务（交给线程池的话））



线程池+网络链接

java 8 function api



手写的单独的trigger

quartz是如何实现trigger等的？？

System.setProperty 以及各种启动方式，例如spring是如何启动的，javafx是如何启动的，android是如何启动的，和一般的main有何不同

spring的值注入方式 @value @configration等

数据库并发读写（主键异常等）



各个子模块pom。x m l



idea配置

- git
- import格式化
- checkstyle
- sonarlint
- maven
- start configration
- color
- 快捷键
- 

bash配置



protobuf修改：

修改之后，对之前的字段进行兼容，多了字段和少了字段，要看之前的是否有影响



https://www.elastic.co/guide/cn/elasticsearch/guide/current/heap-sizing.html



多核>>>>时钟频率



nginx