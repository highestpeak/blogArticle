# 模板方法模式

亦称： Template Method

在超类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤



要点：

- 将算法分解为一系列步骤， 然后将这些步骤改写为方法， 最后在 “模板方法” 中依次调用这些方法
- 步骤可以是 `抽象`的， 也可以有一些默认的实现
  - *抽象步骤*必须由各个子类来实现
  - *可选步骤*已有一些默认实现， 但仍可在需要时进行重写
- 可考虑在算法的关键步骤之间添加钩子

![](E:\_data\博文临时库\博文中的图片\模板方法.png)



- 只希望客户端扩展某个特定算法步骤， 而不是整个算法或其结构
- 当多个类的算法除一些细微不同之外几乎完全一样时

例子：

- 一款分析公司文档的数据挖掘程序。 用户需要向程序输入各种格式 （PDF、 DOC 或 CSV） 的文档， 程序则会试图从这些文件中抽取有意义的数据， 并以统一的格式将其返回给用户
- 为策略游戏中人工智能的不同分支提供“框架”

模版方法模式在 Java 框架中很常见。 开发者通常使用它来向框架用户提供通过继承实现的、 对标准功能进行扩展的简单方式。

这里是一些核心 Java 程序库中模版方法的示例：

- [`java.io.InputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html)、 [`java.io.OutputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html)、 [`java.io.Reader`](https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html) 和 [`java.io.Writer`](https://docs.oracle.com/javase/8/docs/api/java/io/Writer.html) 的所有非抽象方法。
- [`java.util.AbstractList`](https://docs.oracle.com/javase/8/docs/api/java/util/AbstractList.html)、 [`java.util.AbstractSet`](https://docs.oracle.com/javase/8/docs/api/java/util/AbstractSet.html) 和 [`java.util.AbstractMap`](https://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.html) 的所有非抽象方法。
- [`javax.servlet.http.HttpServlet`](https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServlet.html)， 所有默认发送 HTTP 405 “方法不允许” 错误响应的 `do­XXX()` 方法。 你可随时对其进行重写。

**识别方式：** 模版方法可以通过行为方法来识别， 该方法已有一个在基类中定义的 “默认” 行为。

